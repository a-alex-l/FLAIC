<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title | default("FLAIC - Fantasy Life: AI Choices") }}</title>
    {% if description %}
    <meta name="description" content="{{ description }}">
    {% endif %}
    
    <!-- [START] FAVICONS, TOUCH ICONS & MANIFEST -->
    <link rel="icon" href="/assets/favicon.ico" sizes="any">
    <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">
    <link rel="manifest" href="/assets/manifest.webmanifest">
    <meta name="theme-color" content="#0d1117">
    <meta name="apple-mobile-web-app-title" content="FLAIC">
    <!-- [END] FAVICONS, TOUCH ICONS & MANIFEST -->

    <link rel="stylesheet" href="/style/style.css">
    <link rel="stylesheet" href="/style/footer.css">
    <link rel="stylesheet" href="/style/plane.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>

    <!-- [Structured Data (JSON-LD)] -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      {% if schemaType == 'SoftwareApplication' %}
      "@type": "SoftwareApplication",
      "name": "{{ title }}",
      "url": "https://flaic.fun{{ permalink | url }}",
      "applicationCategory": "MultimediaApplication",
      "operatingSystem": "Web-based",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "{{ description }}"

      {% elif schemaType == 'BreadcrumbList' %}
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "FLAIC Home",
          "item": "https://flaic.fun/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "{{ title }}",
          "item": "https://flaic.fun{{ permalink | url }}"
        }
      ]

      {% elif schemaType == 'AboutPage' %}
      "@type": "AboutPage",
      "name": "{{ title }}",
      "url": "https://flaic.fun{{ permalink | url }}",
      "description": "{{ description }}",
      "mainEntity": {
        "@type": "Organization",
        "name": "FLAIC",
        "url": "https://flaic.fun/",
        "logo": "https://flaic.fun/assets/novel.png",
        "sameAs": [
          "https://github.com/a-alex-l/FLAIC",
          "https://t.me/+ZJubebAnw0lmMDcy"
        ]
      }

      {% else %}
      "@type": "WebPage",
      "name": "{{ title }}",
      "url": "https://flaic.fun{{ permalink | url }}",
      "description": "{{ description }}"
      {% endif %}
    }
    </script>
    <!-- End Structured Data -->
</head>
<body>

    {{ content | safe }}

    <main class="container">
        <header>
            <h1>{{ header | default(title) | safe }}</h1>
        </header>

        <section class="top-controls">
            <details>
                <summary>Advanced</summary>
                    <div class="model-selector-block" id="text-generation-block">
                        <label class="block-label">Text Generation API Key</label>
                        <div class="selector-row">
                            <select id="text-provider-select" class="provider-select"></select>
                            <select id="text-model-select" class="model-select"></select>
                        </div>
                        <input type="password" id="text-api-key" class="api-key-input" placeholder="Enter API Key">
                    </div>

                    <div class="model-selector-block" id="image-generation-block">
                        <label class="block-label">Image Generation API Key</label>
                        <div class="selector-row">
                            <select id="image-provider-select" class="provider-select"></select>
                            <select id="image-model-select" class="model-select"></select>
                        </div>
                        <input type="password" id="image-api-key" class="api-key-input" placeholder="Enter API Key">
                    </div>
                <input type="text" id="image-style-prompt" placeholder="Image Style Prompt: Epic, cinematic, hyper-realistic..." value="Epic, stunning, cinematic, hyper-realistic art style, sharp, detailed. ">
            </details>
        </section>

        <section id="comic-container" class="comic-container">
            <!-- Comic panels will be dynamically inserted here -->
        </section>

        <section id="controls-container" class="controls">
            <textarea id="prompt-input" placeholder="Start your story here. For example: 'A cat who wants to become an astronaut builds a rocket out of cardboard boxes.'"></textarea>
            <button id="generate-btn">Generate</button>
        </section>
        
        <script type="module" src="/ui.js"></script>
    </main>

    {% include "footer.html" %}

</body>
</html>